# Configuration for evaluating mapper invertibility
# Usage: python eval_mapper_invertibility.py --config configs/settings/eval_mapper.yaml

# Checkpoints
vae_checkpoint: /home/ec2-user/checkpoints/MelCausalVAE/setting4-b/checkpoint-1000/model.safetensors
mapper_checkpoint: /home/ec2-user/checkpoints/MelCausalVAE/semantic_mapper_invertible/checkpoint-1000/model.safetensors

# Evaluation settings
num_batches: 5
batch_size: 4
seed: 42

# Decoder sampling params
n_steps: 4
temperature: 0.2
guidance_scale: 1.3

# W&B logging
wandb_project: z2y-mapper
wandb_run_name: invertibility-test-5batches

# VAE encoder config (must match the pretrained checkpoint)
convformer:
  compress_factor_C: 8
  tf_heads: 8
  tf_layers: 4
  latent_dim: 64
  n_residual_blocks: 3
  logvar_layer: false
  use_sofplus: false
  target_std: 1.0
  kl_loss_warmup_steps: 1000
  kl_loss_weight: 1e-3

# VAE decoder config (must match the pretrained checkpoint)
cfm:
  unet_dim: 1024
  unet_depth: 8
  unet_heads: 16
  unet_dropout_rate: 0.1
  use_conv_layer: true
  audio_latent_dim: 64
  uncond_prob: 0.1
  is_causal: true

# Mapper config
semantic_mapper:
  n_layers: 6
  hidden_dim: 128

